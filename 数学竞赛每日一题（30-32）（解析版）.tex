\documentclass[a4paper,answers]{exam}
\usepackage[UTF8,linespread=1.5]{ctex}

\pagestyle{headandfoot}
\header{}{}{}
\footer{}{\small \quad 第~\thepage~页(共~\numpages~页)}{}

\usepackage{fourier}
% \usepackage{newtxmath}
% \usepackage{ebgaramond}

\makeatletter
\providecommand{\nmid}{} % a mock definition
\renewcommand\nmid{\mathrel{\mathpalette\thiel@nmid\relax}}
\newcommand{\thiel@nmid}[2]{%
  \ooalign{%
    \rotatebox[origin=c]{40}{$\m@th#1-\mkern-3.5mu$}\cr
    \hidewidth$\m@th#1|$\hidewidth\cr}%
}
\newcommand\wmid{\mathrel{\mathpalette\thiel@mid\relax}}
\newcommand{\thiel@mid}[2]{%
  \ooalign{%
    \hphantom{\rotatebox[origin=c]{40}{$\m@th#1-\mkern-3.5mu$}}\cr
    \hidewidth$\m@th#1|$\hidewidth\cr}%
}
\makeatother

\usepackage{mathtools}
% \usepackage{amsmath,amssymb,amsthm}
% \usepackage{unicode-math}
% \usepackage{mathabx}

\catcode`。=\active
\def。{．}

\usepackage{pgfornament}
\usepackage{xcolor}

\definecolor{dblue}{HTML}{143268}
\definecolor{dpink}{HTML}{B43283}

\usepackage{enumitem}

\renewcommand{\solutiontitle}{\noindent{\heiti\color{red}【解析】}\enspace}
\renewcommand{\questionlabel}{\color{dpink} \thequestion.}


\title{\huge \heiti \color{dblue} 每日一题（30--32）（解析版）\\\pgfornament[scale=0.4]{84}}
\author{}
\date{}

\begin{document}

\maketitle

\thispagestyle{headandfoot}

% \qformat{\Large \textbf{题 \thequestion。}\hfill}

\begin{questions}

\setcounter{question}{29}

\question
% Origin: http://lanqi.org/everyday/29019/
设 $S(x)$ 表示自然数 $x$ 的数字和，求方程 $x+S(x)+S\left(S\left(x\right)\right)=2019$ 的所有自然数解。

\begin{solution}[\stretch{1}]
    易知 $x$ 为四位数，且 $1900<x<2100$．

    \begin{enumerate}[label={(\arabic*)}]
        \item $x=\overline{19ab}$，此时方程即 \[(1900+10a+b)+(1+9+a+b)+S(10+a+b)=2019,\]
        注意到 $a+b \leqslant 18$，于是 $S(10+a+b)=S(a+b)+1$，
        故 \[11a+2b+S(a+b)=108\]
        \begin{enumerate}[label={(\roman*)}]
            \item 若 $a+b<10$，则有 $S(a+b)=a+b$，化简得 $4a+b=36$，解得 $(a,b)=(4,8) \text{~或~} (7,8)$，均不满足要求；
            \item 若 $a+b\geqslant 10$，则有 $S(a+b)=a+b-9$，化简得 $4a+b=39$，解得 $(a,b)=(8,7) \text{或} (9,3)$。
        \end{enumerate}
        所以 $x=1987,1993$ 符合题意。
        \item $x=\overline{20ab}$，此时方程即\[(2000+10a+b)+(2+0+a+b)+S(2+a+b)=2019,\]即\[11a+2b+S(2+a+b)=17\]
        \begin{enumerate}[label={\roman*)}]
            \item 若 $a+b<8$，则有 $S(a+b+2)=a+b+2$，化简得 $4a+b=5$，解得 $(a,b)=(0,5) \text{或} (1,1)$；
            \item 若 $a+b\geqslant 8$，则有 $S(a+b+2)=a+b-7$，化简得 $4a+b=8$，解得 $(a,b)=(0,8)$。
        \end{enumerate}
        所以 $x=2005,2008,2011$ 符合题意。
    \end{enumerate}

    综上所述，所求方程的自然数解为 $1987,1993,2005,2008,2011$。

    \textcolor{red}{\textbf{另解：}}
    注意到 $x \equiv S(x) \equiv S\left(S\left(x\right)\right) \pmod{9}$，可知 $x \equiv 1 \pmod{3}$。
    另外，
    \[
        \begin{aligned}
            0<&S(x)\leqslant 1+9+9+9=28, \\
            0<&S\left(S\left(x\right)\right)\leqslant 1+9=10,
        \end{aligned}
    \]
    故 $1981\leqslant x < 2019$。于是 $x$ 的所有可能值为：
    \[1981,1984,1987,1990,1993,1996,1999,2002,2005,2008,2011,2014,2017,\]
    之后逐一验证即可。
\end{solution}

\question
% Source: http://lanqi.org/everyday/29045/
已知 $a,b$ 为自然数，$\dfrac{a+1}{b}+\dfrac{b+1}a$ 为整数，求证：$a,b$ 没有大于 $\sqrt{a+b}$ 的公因数。

\begin{solution}[\stretch{1}]
    根据题意，有\[\dfrac{a+1}{b}+\dfrac{b+1}a = \dfrac{a^2+b^2+a+b}{ab} \text{是整数} \implies ab\mid a^2+b^2+a+b,\]设 $(a,b)=d$，则 $d^2\mid ab$，$d^2\mid a^2$，$d^2\mid b^2$，从而\[d^2\mid a^2+b^2+a+b\implies d^2\mid a+b\implies d\leqslant \sqrt{a+b},\]命题得证．
\end{solution}

% \question
% Source: http://lanqi.org/everyday/29043/
% 需要用到二次不等式的内容
% 已知 $n^3+2n^2+8n-5$ 是一个正整数的立方，求正整数 $n$ 的的所有可能值。
%
% \begin{solution}[\stretch{1}]
%     考虑到\[(n+1)^3-(n^3+2n^2+8n-5)=(n-2)(n-3),\]而当$n=1$时，$n^3+2n^2+8n-5=6$，当$n\ge 4$时，有\[n^3<n^3+2n^2+8n-5<(n+1)^3,\]因此只有当$n=2,3$时，$n^3+2n^2+8n-5$是正整数的立方．
% \end{solution}

% \question
% % Source: 2019 Canadian MO #2
% 设 $a$、$b$ 为正整数，且满足 $a+b^3$ 能被 $a^2+3ab+3b^2-1$ 整除。求证：$a^2+3ab+3b^2-1$ 能被一个大于 $1$ 的整数的立方整除。
%
% \begin{solution}[\stretch{1}]
%     设 $T=a^2+3ab+3b^2-1$，则
%     \[
%         \begin{aligned}
%             \left( a+b \right)^3 &= a^3+3a^2b+3ab^2+b^3 \\
%             &= a\left( a^2+3ab+3b^2 \right) + b^3 \\
%             &= a\left( T+1 \right) + b^3 \\
%             &= aT + \left( a+b^3 \right)
%         \end{aligned}
%     \]
%     由题知，$T \mid a+b^3$，故 $T \mid \left( a+b \right)^3$。
%
%     设 $a+b$ 的质因数分解为 $p_1^{r_1}p_2^{r_2} \cdots p_n^{r_n}$，$T = p_1^{s_1}p_2^{s_2} \cdots p_n^{s_n}$，其中 $r_i\geqslant 1, s_i\geqslant 0$，则只需证明存在一个 $s_k\geqslant 3$ 即可。
%
%     若对于任意的 $1 \leqslant i \leqslant n$，都有 $s_i \leqslant 2$，于是 $s_i \leqslant 2r_i$，此时有 $T \mid \left( a+b \right)^2$。但是，\[T=a^2+3ab+3b^2-1>a^2+2ab+b^2=\left( a+b \right)^2,\]
%     矛盾。所以一定存在一个 $s_k\geqslant 3$，于是 $p_k^3\mid T$。
% \end{solution}

\question
% Origin: 2019 Mock AMC 9 #22, 2019 AMC 10 #25
设 $n$ 是一个合数，且不能整除 $(n-1)!$，求满足条件的 $n$ 的所有可能值。

\begin{solution}
    只需要满足存在一个质数 $p$，使得 $p^k\mid n$，但 $p^k\nmid (n-1)!$即可。
    设 $n=p^k\times q$，其中 $p$ 为质数，$k$、$q$ 为正整数。
    \begin{enumerate}[label={(\arabic*)}]
        \item 若 $q\geqslant 2$，则 $p^k\mid p^k(q-1) < n-1$，不满足条件，因此 $q=1$，$n=p^k$。由 $n$ 是合数知 $k\geqslant 2$。
        \item 若 $p>2$，则 $2p^{k-1}<p^k=n$，故$p^{k-1}\times 2p^{k-1}\mid (n-1)!$，而 $2(k-1)=k+(k-2)\geqslant k$，不满足条件，因此 $p=2$，$n=2^k$。
        \item 若 $k\geqslant 3$，则 $3\cdot 2^{k-2}<2^k=n$，故 $2^{k-2}\times \left(2\cdot 2^{k-2}\right)\times \left(3\cdot 2^{k-2}\right)\mid (n-1)!$，而 $3(k-2)=3k-6=k+(2k-6)\geqslant k$，不满足条件，因此 $k=2$，$n=4$。
    \end{enumerate}
    综上所述，$n=4$。
\end{solution}

\end{questions}

\end{document}
